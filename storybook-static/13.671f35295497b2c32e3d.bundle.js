(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{2147:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ForwardRef}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var _ref2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95 37.5L47.6547 0L0 37.5V105H95V37.5Z",fill:"#00847A"}),_ref3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{y:71.25,width:95,height:33.75,fill:"#00847A"}),_ref4=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:18.5065,y:9.25,width:57.366,height:61.5,rx:4.5,fill:"#F5F8F7",stroke:"#C3C2C2"}),_ref5=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:25.4575,y:18.75,width:43.4641,height:2.5,rx:1.25,fill:"#C3C2C2"}),_ref6=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:25.4575,y:37.5,width:43.4641,height:2.5,rx:1.25,fill:"#C3C2C2"}),_ref7=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:25.9575,y:24.875,width:42.4641,height:9,rx:4.5,stroke:"#C3C2C2"}),_ref8=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M54.0196 71.1401L95 37.5V105L54.0196 71.1401Z",fill:"#1CAA9F"}),_ref9=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M40.9804 71.3599L0 105L0 37.5L40.9804 71.3599Z",fill:"#1CAA9F"}),_ref10=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M31.0458 26.875L31.6034 28.6025H33.4079L31.948 29.6701L32.5056 31.3975L31.0458 30.3299L29.5859 31.3975L30.1435 29.6701L28.6837 28.6025H30.4881L31.0458 26.875Z",fill:"#1E1D1D"}),_ref11=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M39.1176 26.875L39.6753 28.6025H41.4797L40.0199 29.6701L40.5775 31.3975L39.1176 30.3299L37.6578 31.3975L38.2154 29.6701L36.7555 28.6025H38.56L39.1176 26.875Z",fill:"#1E1D1D"}),_ref12=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M47.1895 26.875L47.7472 28.6025H49.5516L48.0918 29.6701L48.6494 31.3975L47.1895 30.3299L45.7297 31.3975L46.2873 29.6701L44.8274 28.6025H46.6319L47.1895 26.875Z",fill:"#1E1D1D"}),_ref13=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M55.2614 26.875L55.8191 28.6025H57.6235L56.1637 29.6701L56.7213 31.3975L55.2614 30.3299L53.8016 31.3975L54.3592 29.6701L52.8993 28.6025H54.7038L55.2614 26.875Z",fill:"#1E1D1D"}),_ref14=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M63.3333 26.875L63.891 28.6025H65.6954L64.2356 29.6701L64.7932 31.3975L63.3333 30.3299L61.8735 31.3975L62.4311 29.6701L60.9712 28.6025H62.7757L63.3333 26.875Z",fill:"#1E1D1D"});function SvgEmailEnvelope(_ref,svgRef){var title=_ref.title,titleId=_ref.titleId,props=_objectWithoutProperties(_ref,["title","titleId"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:95,height:105,viewBox:"0 0 95 105",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:svgRef,"aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,_ref10,_ref11,_ref12,_ref13,_ref14)}var ForwardRef=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(SvgEmailEnvelope);__webpack_require__.p},882:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(109),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(67),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(553),_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7__),_svgr_webpack_svgo_titleProp_ref_assets_email_envelope_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2147),_components_ProgressContainer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(551),_lib_formFields__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(240),_lib_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(188),_lib_componentUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(239),aws_amplify__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(110),aws_amplify__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(237),_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(165),_graphql_api__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(210),_blend_ui_toast__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(295),_lib_i18n__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(33);_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.init();var EmailVerification=function EmailVerification(_ref){var invalidLink=_ref.invalidLink,_useAccountContext=(Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__.a)(_ref,["invalidLink"]),Object(_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__.c)()),nextStepAction=_useAccountContext.nextStepAction,currentUser=_useAccountContext.currentUser,alerts=Object(_blend_ui_toast__WEBPACK_IMPORTED_MODULE_17__.useToast)(),APIConfig=Object(_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__.d)().APIConfig;aws_amplify__WEBPACK_IMPORTED_MODULE_13__.default.configure(APIConfig),console.log("USER ",currentUser);var _useFormFields=Object(_lib_formFields__WEBPACK_IMPORTED_MODULE_10__.a)({verificationCode:""}),_useFormFields2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useFormFields,2),verificationFields=_useFormFields2[0],handleChange=_useFormFields2[1],_useFocus=Object(_lib_componentUtils__WEBPACK_IMPORTED_MODULE_12__.a)(),_useFocus2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useFocus,2),inputCode=_useFocus2[0],_useState=(_useFocus2[1],Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({status:!1,msg:""})),_useState2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState,2),inputError=_useState2[0],setInputError=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.i)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,"email",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,email:currentUser.email,given_name:currentUser.given_name})).then((function(result){console.log("EMAIL RESULT ",result),alerts.info(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("emailVerificatioSent"),{duration:1e4})})).catch((function(e){console.log("ERR",e)}))}),[currentUser]);var resendClick=function(){var _ref2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(e){return _Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.i)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,"email",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,email:currentUser.email,given_name:currentUser.given_name}));case 3:alerts.info(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("emailVerificatioSent"),{}),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),console.log("ERR",_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})));return function resendClick(_x){return _ref2.apply(this,arguments)}}(),verifyClick=function(){var _ref3=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(e){var userCode,result;return _Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_04_18_24_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,userCode=[currentUser.username,currentUser.client,"email",verificationFields.verificationCode].join("#"),_context2.next=4,Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.h)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,userCode);case 4:null===(result=_context2.sent).data.getVerification&&(alerts.error(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("invalidCode"),{}),setInputError({status:!0})),console.log("VERIFY ",result),nextStepAction(3),_context2.next=16;break;case 10:_context2.prev=10,_context2.t0=_context2.catch(0),console.log("ERR",_context2.t0),alerts.error(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("invalidCode"),{}),setInputError({status:!0}),nextStepAction(3);case 16:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])})));return function verifyClick(_x2){return _ref3.apply(this,arguments)}}();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ProgressContainer__WEBPACK_IMPORTED_MODULE_9__.a,{title:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verificationTitle"),progress:100,pr:19,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:50,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{display:"inline-flex",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_svgr_webpack_svgo_titleProp_ref_assets_email_envelope_svg__WEBPACK_IMPORTED_MODULE_8__.a,{height:"105px",width:"95px"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{ml:34,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"h6",children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("emailVerificationTitle")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:5,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"caption2",as:"p",m:0,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("emailVerificationText")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:15,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField,{width:"200px",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField.LeftIcon,{iconify:_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7___default.a,color:"componentPrimary",size:"17"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField.InputField,{placeholder:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codePropmt"),id:"verificationCode",name:"verificationCode",onChange:handleChange,onKeyDown:function onKeyDown(e){"Enter"===e.key&&function checkInput(code){var validCode=!0;if(!Object(_lib_utils__WEBPACK_IMPORTED_MODULE_11__.i)(code)&&code.length>0){var errorMsg=_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codeDigitsError");alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),setInputError({status:!0}),validCode=!1}if(code.length>1&&6!==code.length){var _errorMsg=_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codeLengthError");alerts.check().some((function(alert){return alert.message===_errorMsg}))||alerts.error(_errorMsg,{}),setInputError({status:!0}),validCode=!1}validCode&&setInputError({status:!1})}(verificationFields.verificationCode)},ref:inputCode,error:inputError.status})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:inputError.status?0:3,display:"inline-flex",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{alignItems:"center",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"caption2",mr:5,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("emailMissing")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{variation:"link",fontSize:"10px",onClick:resendClick,children:[" ",_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("sendAgainLinkText")]})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Link,{href:invalidLink,target:"_blank",fontSize:"10px",children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verifySUpportLink")})})]})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:80,display:"inline-flex",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{variation:"outline",onClick:function backClickAction(e){nextStepAction(0)},children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("backButton")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{ml:99,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{disabled:inputError.status||6!==verificationFields.verificationCode.length,onClick:verifyClick,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verifyButton")})})]})]})})};EmailVerification.__docgenInfo={description:"",methods:[],displayName:"EmailVerification"},__webpack_exports__.default=EmailVerification,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/EmailVerification.js"]={name:"EmailVerification",docgenInfo:EmailVerification.__docgenInfo,path:"src/pages/EmailVerification.js"})}}]);
//# sourceMappingURL=13.671f35295497b2c32e3d.bundle.js.map