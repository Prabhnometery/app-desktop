(window.webpackJsonp=window.webpackJsonp||[]).push([[0,4,5,9],{2144:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ForwardRef}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var _ref2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M0 6C0 2.68629 2.68629 0 6 0H60C64.4183 0 68 3.58172 68 8V129C68 132.314 65.3137 135 62 135H8C3.58172 135 0 131.418 0 127V6Z",fill:"#01544E"}),_ref3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:66,height:133,rx:5,fill:"#00847A"}),_ref4=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:2,y:6,width:62,height:116,rx:5,fill:"#F5F8F7"}),_ref5=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:24,y:125,width:18,height:5,rx:2.5,fill:"#F5F8F7"}),_ref6=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:24,y:3,width:18,height:1,rx:.5,fill:"#F5F8F7"}),_ref7=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 49V58H42.3809C40.015 60.4653 36.6867 62 33 62C29.3133 62 25.985 60.4653 23.6191 58H20V49C20 41.8203 25.8203 36 33 36C40.1797 36 46 41.8203 46 49Z",fill:"#01544E"}),_ref8=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 49C42 44.0294 37.9706 40 33 40C28.0294 40 24 44.0294 24 49V58H33H42V49Z",fill:"#F5F8F7"}),_ref9=react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{x:14,y:58,width:38,height:34,rx:3,fill:"#00847A"}),_ref10=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35 74.2361C35.6137 73.6868 36 72.8885 36 72C36 70.3431 34.6569 69 33 69C31.3431 69 30 70.3431 30 72C30 72.8885 30.3863 73.6868 31 74.2361V80C31 81.1046 31.8954 82 33 82C34.1046 82 35 81.1046 35 80V74.2361Z",fill:"#01544E"});function SvgPhone(_ref,svgRef){var title=_ref.title,titleId=_ref.titleId,props=_objectWithoutProperties(_ref,["title","titleId"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:68,height:135,viewBox:"0 0 68 135",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:svgRef,"aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,_ref10)}var ForwardRef=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(SvgPhone);__webpack_require__.p},2146:function(module,exports){exports.__esModule=!0,exports.default={body:'<path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 2v.511l-8 6.223l-8-6.222V6h16zM4 18V9.044l7.386 5.745a.994.994 0 0 0 1.228 0L20 9.044L20.002 18H4z" fill="currentColor"/>',width:24,height:24}},2147:function(module,exports){exports.__esModule=!0,exports.default={body:'<path d="M17.707 12.293a.999.999 0 0 0-1.414 0l-1.594 1.594c-.739-.22-2.118-.72-2.992-1.594s-1.374-2.253-1.594-2.992l1.594-1.594a.999.999 0 0 0 0-1.414l-4-4a.999.999 0 0 0-1.414 0L3.581 5.005c-.38.38-.594.902-.586 1.435c.023 1.424.4 6.37 4.298 10.268s8.844 4.274 10.269 4.298h.028c.528 0 1.027-.208 1.405-.586l2.712-2.712a.999.999 0 0 0 0-1.414l-4-4.001zm-.127 6.712c-1.248-.021-5.518-.356-8.873-3.712c-3.366-3.366-3.692-7.651-3.712-8.874L7 4.414L9.586 7L8.293 8.293a1 1 0 0 0-.272.912c.024.115.611 2.842 2.271 4.502s4.387 2.247 4.502 2.271a.991.991 0 0 0 .912-.271L17 14.414L19.586 17l-2.006 2.005z" fill="currentColor"/>',width:24,height:24}},884:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(112),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16),_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(79),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(556),_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7__),_svgr_webpack_svgo_titleProp_ref_assets_phone_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2144),_components_ProgressContainer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(555),_lib_formFields__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(244),_lib_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(191),_lib_componentUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(243),aws_amplify__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(102),aws_amplify__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(241),_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(133),_graphql_api__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(161),_blend_ui_toast__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(298),_lib_i18n__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(36);_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.init();var PhoneVerification=function PhoneVerification(_ref){var invalidLink=_ref.invalidLink,_useAccountContext=(Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__.a)(_ref,["invalidLink"]),Object(_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__.c)()),nextStepAction=_useAccountContext.nextStepAction,currentUser=_useAccountContext.currentUser,alerts=Object(_blend_ui_toast__WEBPACK_IMPORTED_MODULE_17__.useToast)(),APIConfig=Object(_lib_contextLib__WEBPACK_IMPORTED_MODULE_15__.d)().APIConfig;aws_amplify__WEBPACK_IMPORTED_MODULE_13__.default.configure(APIConfig);var _useFormFields=Object(_lib_formFields__WEBPACK_IMPORTED_MODULE_10__.a)({verificationCode:""}),_useFormFields2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useFormFields,2),verificationFields=_useFormFields2[0],handleChange=_useFormFields2[1],_useFocus=Object(_lib_componentUtils__WEBPACK_IMPORTED_MODULE_12__.a)(),_useFocus2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useFocus,2),inputCode=_useFocus2[0],_useState=(_useFocus2[1],Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({status:!1,msg:""})),_useState2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState,2),inputError=_useState2[0],setInputError=_useState2[1],verifyClick=function(){var _ref2=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(e){var userCode,result;return _Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,userCode=[currentUser.username,currentUser.client,"phone",verificationFields.verificationCode].join("#"),_context.next=4,Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.i)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,userCode);case 4:null===(result=_context.sent).data.getVerification&&(alerts.error(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("invalidCode"),{}),setInputError({status:!0})),console.log("VERIFY ",result),nextStepAction(4),_context.next=16;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.log("ERR",_context.t0),alerts.error(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("invalidCode"),{}),setInputError({status:!0}),nextStepAction(4);case 16:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function verifyClick(_x){return _ref2.apply(this,arguments)}}(),resendClick=function(){var _ref3=Object(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(e){return _Users_Tero_react_projects_local_development_prifina_development_prifina_releases_app_desktop_alpha_2021_04_15_07_29_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.j)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,"phone",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,phone_number:currentUser.phone_number,given_name:currentUser.given_name}));case 3:alerts.info(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("phoneVerificatioSent"),{}),_context2.next=9;break;case 6:_context2.prev=6,_context2.t0=_context2.catch(0),console.log("ERR",_context2.t0);case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])})));return function resendClick(_x2){return _ref3.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){Object(_graphql_api__WEBPACK_IMPORTED_MODULE_16__.j)(aws_amplify__WEBPACK_IMPORTED_MODULE_14__.a,"phone",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,phone_number:currentUser.phone_number,given_name:currentUser.given_name})).then((function(result){console.log("PHONE SMS RESULT ",result),alerts.info(_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("phoneVerificatioSent"),{duration:1e4})})).catch((function(e){console.log("ERR",e)}))}),[currentUser]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ProgressContainer__WEBPACK_IMPORTED_MODULE_9__.a,{title:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verificationTitle"),progress:100,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:47,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{display:"inline-flex",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_svgr_webpack_svgo_titleProp_ref_assets_phone_svg__WEBPACK_IMPORTED_MODULE_8__.a,{height:"135px",width:"68px"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{ml:48,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"h6",children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("phoneVerificationTitle")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:5,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"caption2",as:"p",m:0,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("phoneVerificationText")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:15,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField,{width:"200px",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField.LeftIcon,{iconify:_iconify_icons_bx_bx_key__WEBPACK_IMPORTED_MODULE_7___default.a,color:"componentPrimary",size:"17"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconField.InputField,{placeholder:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codePropmt"),id:"verificationCode",name:"verificationCode",onChange:handleChange,onKeyDown:function onKeyDown(e){"Enter"===e.key&&function checkInput(code){var validCode=!0;if(!Object(_lib_utils__WEBPACK_IMPORTED_MODULE_11__.i)(code)){var errorMsg=_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codeDigitsError");alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),setInputError({status:!0}),validCode=!1}if(code.length>1&&6!==code.length){var _errorMsg=_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codeLengthError");alerts.check().some((function(alert){return alert.message===_errorMsg}))||alerts.error(_errorMsg,{}),setInputError({status:!0}),validCode=!1}validCode&&setInputError({status:!1,msg:""})}(verificationFields.verificationCode)},ref:inputCode,error:inputError.status})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:inputError.status?0:3,display:"inline-flex",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{alignItems:"center",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Text,{textStyle:"caption2",mr:5,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("codeMissing")}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{variation:"link",fontSize:"10px",onClick:resendClick,children:[" ",_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("sendAgainLinkText")]})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Link,{href:invalidLink,target:"_blank",fontSize:"10px",children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verifySUpportLink")})})]})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Box,{mt:84,display:"inline-flex",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{variation:"outline",onClick:function backClickAction(e){nextStepAction(0)},children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("backButton")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Flex,{ml:99,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_blend_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button,{disabled:inputError.status||6!==verificationFields.verificationCode.length,onClick:verifyClick,children:_lib_i18n__WEBPACK_IMPORTED_MODULE_18__.a.__("verifyButton")})})]})]})};PhoneVerification.__docgenInfo={description:"",methods:[],displayName:"PhoneVerification",props:{invalidLink:{type:{name:"string"},required:!0,description:""}}},__webpack_exports__.default=PhoneVerification,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/PhoneVerification.js"]={name:"PhoneVerification",docgenInfo:PhoneVerification.__docgenInfo,path:"src/pages/PhoneVerification.js"})},887:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jsx_runtime=__webpack_require__(1),slicedToArray=__webpack_require__(16),taggedTemplateLiteral=__webpack_require__(100),react=__webpack_require__(0),react_default=__webpack_require__.n(react),esm=__webpack_require__(6),ProgressContainer=__webpack_require__(555),objectSpread2=__webpack_require__(12),objectWithoutProperties=__webpack_require__(79),dist_esm=__webpack_require__(162),i18n=__webpack_require__(36);i18n.a.init();var DeclineDialog_DeclineDialog=function DeclineDialog(_ref){var onClose=_ref.onClose,onButtonClick=_ref.onButtonClick,props=Object(objectWithoutProperties.a)(_ref,["onClose","onButtonClick"]),theme=Object(esm.useTheme)(),_useState=Object(react.useState)(!0),_useState2=Object(slicedToArray.a)(_useState,2),dialogOpen=_useState2[0],setDialogOpen=_useState2[1];return Object(jsx_runtime.jsx)(react_default.a.Fragment,{children:Object(jsx_runtime.jsx)(dist_esm.Modal,Object(objectSpread2.a)(Object(objectSpread2.a)({isOpen:dialogOpen,closeOnEsc:!1,closeOnOutsideClick:!1,onClose:function onCloseCheck(e,action){console.log("MODAL CLOSE ",e,action),onClose(e,action),e.preventDefault()},scrollBehavior:"inside",theme:theme,size:"566px"},props),{},{children:Object(jsx_runtime.jsxs)(dist_esm.ModalContent,{children:[Object(jsx_runtime.jsx)(dist_esm.ModalHeader,{children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"h5",color:theme.colors.baseError,children:i18n.a.__("declineTitle")})}),Object(jsx_runtime.jsx)(dist_esm.ModalBody,{ml:55,mr:55,children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"body",as:"p",textAlign:"center",children:i18n.a.__("declineText")})}),Object(jsx_runtime.jsx)(dist_esm.ModalFooter,{children:Object(jsx_runtime.jsxs)(esm.Box,{textAlign:"center",width:1,children:[Object(jsx_runtime.jsx)(esm.Button,{variation:"outline",colorStyle:"error",onClick:function onClick(e){setDialogOpen(!1),onButtonClick(e,"cancel"),e.preventDefault()},children:i18n.a.__("cancelButton")}),Object(jsx_runtime.jsx)(esm.Button,{ml:20,onClick:function onClick(e){setDialogOpen(!1),onButtonClick(e,"decline"),e.preventDefault()},children:i18n.a.__("declineButton")})]})})]})}))})};DeclineDialog_DeclineDialog.__docgenInfo={description:"",methods:[],displayName:"DeclineDialog",props:{onClose:{type:{name:"func"},required:!0,description:""},onButtonClick:{type:{name:"func"},required:!0,description:""}}};var components_DeclineDialog=DeclineDialog_DeclineDialog;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DeclineDialog.js"]={name:"DeclineDialog",docgenInfo:DeclineDialog_DeclineDialog.__docgenInfo,path:"src/components/DeclineDialog.js"});var styled_components_browser_esm=__webpack_require__(26),contextLib=__webpack_require__(133);function _templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  scrollbar-width: 4px;\n  scrollbar-color: ","\n    ",";\n\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n  }\n\n  ::-webkit-scrollbar:vertical {\n    width: 4px;\n    height: 77px;\n  }\n\n  ::-webkit-scrollbar-track {\n    border-radius: 10px;\n    background-color: ",";\n  }\n\n  ::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    height: 77px;\n    background-color: ",";\n  }\n  ::-webkit-scrollbar-thumb:vertical {\n    height: 77px;\n  }\n"]);return _templateObject=function _templateObject(){return data},data}i18n.a.init();var StyledBox=Object(styled_components_browser_esm.default)(esm.Box)(_templateObject(),(function(props){return props.colors?props.colors.baseSecondary:"#00847A"}),(function(props){return props.colors?props.colors.baseTertiary:"rgba(0, 132, 122, 0.1)"}),(function(props){return props.colors?props.colors.baseTertiary:"rgba(0, 132, 122, 0.1)"}),(function(props){return props.colors?props.colors.baseSecondary:"#00847A"})),texts=[{title:i18n.a.__("agreeementTitle"),text:i18n.a.__("agreementText")},{title:i18n.a.__("serviceTitle"),text:i18n.a.__("serviceText")},{title:i18n.a.__("accountsTitle"),text:i18n.a.__("accountsText")},{title:i18n.a.__("dataTitle"),text:i18n.a.__("dataText")},{title:i18n.a.__("materialsTitle"),text:i18n.a.__("materialsText")}],TermsOfUse_TermsOfUse=function TermsOfUse(props){console.log("Terms ",props);var nextStepAction=Object(contextLib.c)().nextStepAction,colors=Object(esm.useTheme)().colors,_useState=Object(react.useState)(!1),_useState2=Object(slicedToArray.a)(_useState,2),scrolled=_useState2[0],setScrolled=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=Object(slicedToArray.a)(_useState3,2),decline=_useState4[0],setDecline=_useState4[1];return Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[decline&&Object(jsx_runtime.jsx)(components_DeclineDialog,{onClose:function onDialogClose(e,action){setDecline(!1),e.preventDefault()},onButtonClick:function onDialogClick(e,action){setDecline(!1),"decline"===action&&nextStepAction(0),e.preventDefault()}}),Object(jsx_runtime.jsxs)(ProgressContainer.a,{title:i18n.a.__("termsTitle"),progress:66,children:[Object(jsx_runtime.jsx)(esm.Box,{textAlign:"center",children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption",bold:!0,children:i18n.a.__("termsLastUpdated")})}),Object(jsx_runtime.jsx)(esm.Box,{mt:22,height:313,children:Object(jsx_runtime.jsx)(StyledBox,{height:"100%",colors:colors,onScroll:function _handleScroll(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&setScrolled(!0)},children:texts.map((function(t,i){return Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption",bold:!0,children:t.title}),Object(jsx_runtime.jsx)(esm.Text,{as:"p",textStyle:"caption",children:t.text})]},"text-"+i)}))})}),Object(jsx_runtime.jsx)(esm.Box,{mt:63,display:"inline-flex",children:Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[Object(jsx_runtime.jsx)(esm.Flex,{children:Object(jsx_runtime.jsx)(esm.Button,{variation:"outline",colorStyle:"error",onClick:function declineTerms(e){setDecline(!0),e.preventDefault()},children:i18n.a.__("declineButton")})}),Object(jsx_runtime.jsx)(esm.Flex,{ml:99,children:Object(jsx_runtime.jsx)(esm.Button,{disabled:!scrolled,onClick:function approveTerms(e){nextStepAction(2)},children:i18n.a.__("approveButton")})})]})})]})]})};TermsOfUse_TermsOfUse.__docgenInfo={description:"",methods:[],displayName:"TermsOfUse"};__webpack_exports__.default=TermsOfUse_TermsOfUse;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/TermsOfUse.js"]={name:"TermsOfUse",docgenInfo:TermsOfUse_TermsOfUse.__docgenInfo,path:"src/pages/TermsOfUse.js"})},888:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jsx_runtime=__webpack_require__(1),regenerator=__webpack_require__(70),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(112),slicedToArray=__webpack_require__(16),objectWithoutProperties=__webpack_require__(79),react=__webpack_require__(0),react_default=__webpack_require__.n(react),esm=__webpack_require__(6),bx_key=__webpack_require__(556),bx_key_default=__webpack_require__.n(bx_key);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var email_envelope_ref2=react.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95 37.5L47.6547 0L0 37.5V105H95V37.5Z",fill:"#00847A"}),email_envelope_ref3=react.createElement("rect",{y:71.25,width:95,height:33.75,fill:"#00847A"}),_ref4=react.createElement("rect",{x:18.5065,y:9.25,width:57.366,height:61.5,rx:4.5,fill:"#F5F8F7",stroke:"#C3C2C2"}),_ref5=react.createElement("rect",{x:25.4575,y:18.75,width:43.4641,height:2.5,rx:1.25,fill:"#C3C2C2"}),_ref6=react.createElement("rect",{x:25.4575,y:37.5,width:43.4641,height:2.5,rx:1.25,fill:"#C3C2C2"}),_ref7=react.createElement("rect",{x:25.9575,y:24.875,width:42.4641,height:9,rx:4.5,stroke:"#C3C2C2"}),_ref8=react.createElement("path",{d:"M54.0196 71.1401L95 37.5V105L54.0196 71.1401Z",fill:"#1CAA9F"}),_ref9=react.createElement("path",{d:"M40.9804 71.3599L0 105L0 37.5L40.9804 71.3599Z",fill:"#1CAA9F"}),_ref10=react.createElement("path",{d:"M31.0458 26.875L31.6034 28.6025H33.4079L31.948 29.6701L32.5056 31.3975L31.0458 30.3299L29.5859 31.3975L30.1435 29.6701L28.6837 28.6025H30.4881L31.0458 26.875Z",fill:"#1E1D1D"}),_ref11=react.createElement("path",{d:"M39.1176 26.875L39.6753 28.6025H41.4797L40.0199 29.6701L40.5775 31.3975L39.1176 30.3299L37.6578 31.3975L38.2154 29.6701L36.7555 28.6025H38.56L39.1176 26.875Z",fill:"#1E1D1D"}),_ref12=react.createElement("path",{d:"M47.1895 26.875L47.7472 28.6025H49.5516L48.0918 29.6701L48.6494 31.3975L47.1895 30.3299L45.7297 31.3975L46.2873 29.6701L44.8274 28.6025H46.6319L47.1895 26.875Z",fill:"#1E1D1D"}),_ref13=react.createElement("path",{d:"M55.2614 26.875L55.8191 28.6025H57.6235L56.1637 29.6701L56.7213 31.3975L55.2614 30.3299L53.8016 31.3975L54.3592 29.6701L52.8993 28.6025H54.7038L55.2614 26.875Z",fill:"#1E1D1D"}),_ref14=react.createElement("path",{d:"M63.3333 26.875L63.891 28.6025H65.6954L64.2356 29.6701L64.7932 31.3975L63.3333 30.3299L61.8735 31.3975L62.4311 29.6701L60.9712 28.6025H62.7757L63.3333 26.875Z",fill:"#1E1D1D"});function SvgEmailEnvelope(_ref,svgRef){var title=_ref.title,titleId=_ref.titleId,props=_objectWithoutProperties(_ref,["title","titleId"]);return react.createElement("svg",_extends({width:95,height:105,viewBox:"0 0 95 105",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,email_envelope_ref2,email_envelope_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,_ref10,_ref11,_ref12,_ref13,_ref14)}var ForwardRef=react.forwardRef(SvgEmailEnvelope),ProgressContainer=(__webpack_require__.p,__webpack_require__(555)),formFields=__webpack_require__(244),utils=__webpack_require__(191),componentUtils=__webpack_require__(243),lib_esm=__webpack_require__(102),API=__webpack_require__(241),contextLib=__webpack_require__(133),api=__webpack_require__(161),dist_esm=__webpack_require__(298),i18n=__webpack_require__(36);i18n.a.init();var EmailVerification_EmailVerification=function EmailVerification(_ref){var invalidLink=_ref.invalidLink,_useAccountContext=(Object(objectWithoutProperties.a)(_ref,["invalidLink"]),Object(contextLib.c)()),nextStepAction=_useAccountContext.nextStepAction,currentUser=_useAccountContext.currentUser,alerts=Object(dist_esm.useToast)(),APIConfig=Object(contextLib.d)().APIConfig;lib_esm.default.configure(APIConfig),console.log("USER ",currentUser);var _useFormFields=Object(formFields.a)({verificationCode:""}),_useFormFields2=Object(slicedToArray.a)(_useFormFields,2),verificationFields=_useFormFields2[0],handleChange=_useFormFields2[1],_useFocus=Object(componentUtils.a)(),_useFocus2=Object(slicedToArray.a)(_useFocus,2),inputCode=_useFocus2[0],_useState=(_useFocus2[1],Object(react.useState)({status:!1,msg:""})),_useState2=Object(slicedToArray.a)(_useState,2),inputError=_useState2[0],setInputError=_useState2[1];Object(react.useEffect)((function(){Object(api.j)(API.a,"email",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,email:currentUser.email,given_name:currentUser.given_name})).then((function(result){console.log("EMAIL RESULT ",result),alerts.info(i18n.a.__("emailVerificatioSent"),{duration:1e4})})).catch((function(e){console.log("ERR",e)}))}),[currentUser]);var resendClick=function(){var _ref2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(e){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,Object(api.j)(API.a,"email",JSON.stringify({userId:currentUser.username,clientId:currentUser.client,email:currentUser.email,given_name:currentUser.given_name}));case 3:alerts.info(i18n.a.__("emailVerificatioSent"),{}),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),console.log("ERR",_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})));return function resendClick(_x){return _ref2.apply(this,arguments)}}(),verifyClick=function(){var _ref3=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(e){var userCode,result;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,userCode=[currentUser.username,currentUser.client,"email",verificationFields.verificationCode].join("#"),_context2.next=4,Object(api.i)(API.a,userCode);case 4:null===(result=_context2.sent).data.getVerification&&(alerts.error(i18n.a.__("invalidCode"),{}),setInputError({status:!0})),console.log("VERIFY ",result),nextStepAction(3),_context2.next=16;break;case 10:_context2.prev=10,_context2.t0=_context2.catch(0),console.log("ERR",_context2.t0),alerts.error(i18n.a.__("invalidCode"),{}),setInputError({status:!0}),nextStepAction(3);case 16:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])})));return function verifyClick(_x2){return _ref3.apply(this,arguments)}}();return Object(jsx_runtime.jsx)(react_default.a.Fragment,{children:Object(jsx_runtime.jsxs)(ProgressContainer.a,{title:i18n.a.__("verificationTitle"),progress:100,pr:19,children:[Object(jsx_runtime.jsx)(esm.Box,{mt:50,children:Object(jsx_runtime.jsxs)(esm.Box,{display:"inline-flex",children:[Object(jsx_runtime.jsx)(esm.Box,{children:Object(jsx_runtime.jsx)(ForwardRef,{height:"105px",width:"95px"})}),Object(jsx_runtime.jsxs)(esm.Box,{ml:34,children:[Object(jsx_runtime.jsx)(esm.Box,{children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"h6",children:i18n.a.__("emailVerificationTitle")})}),Object(jsx_runtime.jsx)(esm.Box,{mt:5,children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption2",as:"p",m:0,children:i18n.a.__("emailVerificationText")})}),Object(jsx_runtime.jsx)(esm.Box,{mt:15,children:Object(jsx_runtime.jsxs)(esm.IconField,{width:"200px",children:[Object(jsx_runtime.jsx)(esm.IconField.LeftIcon,{iconify:bx_key_default.a,color:"componentPrimary",size:"17"}),Object(jsx_runtime.jsx)(esm.IconField.InputField,{placeholder:i18n.a.__("codePropmt"),id:"verificationCode",name:"verificationCode",onChange:handleChange,onKeyDown:function onKeyDown(e){"Enter"===e.key&&function checkInput(code){var validCode=!0;if(!Object(utils.i)(code)&&code.length>0){var errorMsg=i18n.a.__("codeDigitsError");alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),setInputError({status:!0}),validCode=!1}if(code.length>1&&6!==code.length){var _errorMsg=i18n.a.__("codeLengthError");alerts.check().some((function(alert){return alert.message===_errorMsg}))||alerts.error(_errorMsg,{}),setInputError({status:!0}),validCode=!1}validCode&&setInputError({status:!1})}(verificationFields.verificationCode)},ref:inputCode,error:inputError.status})]})}),Object(jsx_runtime.jsx)(esm.Box,{mt:inputError.status?0:3,display:"inline-flex",children:Object(jsx_runtime.jsxs)(esm.Flex,{alignItems:"center",children:[Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption2",mr:5,children:i18n.a.__("emailMissing")}),Object(jsx_runtime.jsxs)(esm.Button,{variation:"link",fontSize:"10px",onClick:resendClick,children:[" ",i18n.a.__("sendAgainLinkText")]})]})}),Object(jsx_runtime.jsx)(esm.Box,{children:Object(jsx_runtime.jsx)(esm.Link,{href:invalidLink,target:"_blank",fontSize:"10px",children:i18n.a.__("verifySUpportLink")})})]})]})}),Object(jsx_runtime.jsxs)(esm.Box,{mt:80,display:"inline-flex",children:[Object(jsx_runtime.jsx)(esm.Flex,{children:Object(jsx_runtime.jsx)(esm.Button,{variation:"outline",onClick:function backClickAction(e){nextStepAction(0)},children:i18n.a.__("backButton")})}),Object(jsx_runtime.jsx)(esm.Flex,{ml:99,children:Object(jsx_runtime.jsx)(esm.Button,{disabled:inputError.status||6!==verificationFields.verificationCode.length,onClick:verifyClick,children:i18n.a.__("verifyButton")})})]})]})})};EmailVerification_EmailVerification.__docgenInfo={description:"",methods:[],displayName:"EmailVerification",props:{invalidLink:{type:{name:"string"},required:!0,description:""}}};__webpack_exports__.default=EmailVerification_EmailVerification;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/EmailVerification.js"]={name:"EmailVerification",docgenInfo:EmailVerification_EmailVerification.__docgenInfo,path:"src/pages/EmailVerification.js"})},889:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var defineProperty=__webpack_require__(364),regenerator=__webpack_require__(70),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(112),objectSpread2=__webpack_require__(12),slicedToArray=__webpack_require__(16),jsx_runtime=__webpack_require__(1),react=__webpack_require__(0),react_default=__webpack_require__.n(react),esm=__webpack_require__(6),contextLib=__webpack_require__(133),bx_user=__webpack_require__(557),bx_user_default=__webpack_require__.n(bx_user),bx_envelope=__webpack_require__(2146),bx_envelope_default=__webpack_require__.n(bx_envelope),ProgressContainer=__webpack_require__(555),PasswordField=__webpack_require__(558),objectWithoutProperties=__webpack_require__(79),taggedTemplateLiteral=__webpack_require__(100),bx_phone=__webpack_require__(2147),bx_phone_default=__webpack_require__.n(bx_phone),dist_esm=__webpack_require__(169),styled_components_browser_esm=__webpack_require__(26),index_esm=__webpack_require__(44),auto_id_esm=__webpack_require__(246);function _templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  flex: none;\n  align-self: center;\n  pointer-events: none;\n  position: relative;\n"]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  ","\n  display: flex;\n  height: ",";\n  background-color: ",";\n  border: ",";\n  border-radius: ",";\n\n  &:focus,\n  &:not([disabled]):hover {\n    outline: none;\n    -webkit-box-shadow: none;\n    box-shadow: none;\n    border: ",";\n  }\n  /*\n  &:disabled {\n    background: ",";\n    border: ",";\n    pointer-events: none;\n  }\n  \n  &:invalid {\n    outline: none;\n    -webkit-box-shadow: none;\n    box-shadow: none;\n    border: props.theme.borders.input.error};\n  }\n  */\n"]);return _templateObject=function _templateObject(){return data},data}var StyledBox=Object(styled_components_browser_esm.default)(esm.Box)(_templateObject(),index_esm.space,(function(props){return props.height?props.height:props.theme.componentStyles.input.base.height}),(function(props){return props.disabled?props.theme.colors.text.muted:props.theme.componentStyles.input.base.backgroundColor||"transparent"}),(function(props){return void 0!==props.borders?props.borders:props.errorinput?props.theme.borders.input.error:props.theme.componentStyles.input.base.border}),(function(props){return void 0!==props.borderRadius?props.borderRadius:props.theme.componentStyles.input.base.borderRadius}),(function(props){return props.theme.borders.input.active}),(function(props){return props.theme.colors.text.muted}),(function(props){return props.theme.borders.input.disabled})),InputContext=Object(react.createContext)(),PhoneNumberField_useInputContext=function useInputContext(){return Object(react.useContext)(InputContext)},PhoneNumberField_PhoneNumberField=function PhoneNumberField(_ref){var children=_ref.children,disabled=_ref.disabled,id=_ref.id,isIcon=(Object(objectWithoutProperties.a)(_ref,["children","disabled","id"]),function isIcon(item){return item.type.isIcon||item.type.isIconButton}),colors=Object(esm.useTheme)().colors,uuid=Object(auto_id_esm.useId)(),_id=id||uuid,formatIds=function formatIds(id){return{select:"search-".concat(id,"-select"),input:"search-".concat(id,"-input")}},selectId=formatIds(_id).select,inputId=formatIds(_id).input,inputError=!1,errorMsg="",promptMsg="";react_default.a.Children.toArray(children).forEach((function(child,i){isIcon(child)||inputError||(inputError=child.props.error||!1),!isIcon(child)&&child.props.errorMsg&&(errorMsg=child.props.errorMsg),!isIcon(child)&&child.props.promptMsg&&(promptMsg=child.props.promptMsg)}));var boxRef=Object(react.createRef)();return Object(jsx_runtime.jsxs)(InputContext.Provider,{value:{disabled:disabled,inputError:inputError,inputId:inputId,selectId:selectId,boxRef:boxRef},children:[Object(jsx_runtime.jsxs)(StyledBox,{disabled:disabled||null,errorinput:inputError?1:void 0,ref:boxRef,children:[Object(jsx_runtime.jsx)(LeftIcon,{iconify:bx_phone_default.a,color:"componentPrimary",size:"17"}),children]}),""!==errorMsg&&inputError&&Object(jsx_runtime.jsx)(esm.Box,{mt:0,mb:10,children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption2",color:colors.baseError,children:errorMsg})}),""!==promptMsg&&!inputError&&Object(jsx_runtime.jsx)(esm.Box,{mt:0,mb:10,children:Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption2",color:colors.baseSecondary,children:promptMsg})})]})},SelectField=Object(react.forwardRef)((function(_ref2,ref){var options=_ref2.options,defaultValue=_ref2.defaultValue,_ref2$searchLength=_ref2.searchLength,searchLength=void 0===_ref2$searchLength?3:_ref2$searchLength,_ref2$showList=_ref2.showList,showList=void 0!==_ref2$showList&&_ref2$showList,_ref2$selectOption=_ref2.selectOption,selectOption=void 0===_ref2$selectOption?"key":_ref2$selectOption,props=Object(objectWithoutProperties.a)(_ref2,["options","defaultValue","searchLength","showList","selectOption"]),_useInputContext=PhoneNumberField_useInputContext(),selectId=_useInputContext.selectId,boxRef=_useInputContext.boxRef;return Object(jsx_runtime.jsx)(esm.SearchSelect,Object(objectSpread2.a)({id:selectId,name:selectId,defaultValue:defaultValue,options:options,showList:showList,searchLength:searchLength,size:"sm",width:"60px",selectOption:selectOption,containerRef:boxRef,containerOffset:"-38px",ref:ref},props))})),InputField=Object(react.forwardRef)((function(_ref3,ref){_ref3.children,_ref3.errorMsg,_ref3.promptMsg;var props=Object(objectWithoutProperties.a)(_ref3,["children","errorMsg","promptMsg"]),_useInputContext2=PhoneNumberField_useInputContext(),disabled=_useInputContext2.disabled,inputId=_useInputContext2.inputId,theme=Object(esm.useTheme)();return Object(jsx_runtime.jsx)(esm.Input,Object(objectSpread2.a)(Object(objectSpread2.a)({id:inputId,name:inputId,ref:ref,isIcon:!0,borders:0,disabled:disabled||null},props),{},{paddingLeft:theme.sizeOptions[10],paddingRight:theme.sizeOptions[10]}))})),LeftIcon=Object(styled_components_browser_esm.default)((function(props){var _useInputContext3=PhoneNumberField_useInputContext(),disabled=_useInputContext3.disabled,inputError=_useInputContext3.inputError,theme=Object(esm.useTheme)();return Object(jsx_runtime.jsx)(dist_esm.BlendIcon,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{fill:disabled?theme.colors.baseMuted:"transparent",color:inputError?theme.colors.baseError:props.color||theme.colors.baseSecondary,theme:theme,style:{marginLeft:theme.sizeOptions[10],marginRight:theme.sizeOptions[10]}}))}))(_templateObject2());InputField.displayName="PhoneNumberInputField",PhoneNumberField_PhoneNumberField.InputField=InputField,SelectField.displayName="PhoneNumberRegionField",PhoneNumberField_PhoneNumberField.RegionField=SelectField,PhoneNumberField_PhoneNumberField.__docgenInfo={description:"",methods:[],displayName:"PhoneNumberField",props:{id:{type:{name:"string"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},children:{type:{name:"array"},required:!1,description:""}}};var components_PhoneNumberField=PhoneNumberField_PhoneNumberField;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PhoneNumberField.js"]={name:"PhoneNumberField",docgenInfo:PhoneNumberField_PhoneNumberField.__docgenInfo,path:"src/components/PhoneNumberField.js"});var react_router=__webpack_require__(2142),utils=__webpack_require__(191),componentUtils=__webpack_require__(243),config=__webpack_require__(17),api=__webpack_require__(161),lib_esm=__webpack_require__(102),Auth=__webpack_require__(132),API=__webpack_require__(241),v4=__webpack_require__(713),i18n=__webpack_require__(36),TermsOfUse=__webpack_require__(887),EmailVerification=__webpack_require__(888),PhoneVerification=__webpack_require__(884),toast_dist_esm=__webpack_require__(298);i18n.a.init();var CreateAccount_CreateAccount=function CreateAccount(props){var history=Object(react_router.a)(),alerts=Object(toast_dist_esm.useToast)(),_useAppContext=Object(contextLib.d)(),APIConfig=_useAppContext.APIConfig,AUTHConfig=_useAppContext.AUTHConfig;lib_esm.default.configure(APIConfig),Auth.a.configure(AUTHConfig);var uuid=Object(v4.a)(),appDebug="true"===Object({NODE_ENV:"production",NODE_PATH:"",STORYBOOK:"true",PUBLIC_URL:"."}).REACT_APP_DEBUG&&"?debug=true"===history.location.search;console.log("APP DEBUG ",appDebug);var colors=Object(esm.useTheme)().colors,selectOptions=Object(utils.c)().map((function(cc){return{key:"+"+cc.countryCode,value:cc.regionName,regionCode:cc.regionCode,searchValue:cc.regionName+" +"+cc.countryCode,component:Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[Object(jsx_runtime.jsx)(esm.Text,{as:"span",children:cc.regionName}),Object(jsx_runtime.jsxs)(esm.Text,{as:"span",color:colors.textMuted,fontSize:"xs",pl:4,children:["(+",cc.countryCode,")"]})]})}})),initUser={username:uuid,given_name:"",client:AUTHConfig.userPoolWebClientId,email:"",phone_number:""},_useState=Object(react.useState)(initUser),_useState2=Object(slicedToArray.a)(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1],_useState3=Object(react.useState)(0),_useState4=Object(slicedToArray.a)(_useState3,2),_useState5=(_useState4[0],_useState4[1],Object(react.useState)(0)),_useState6=Object(slicedToArray.a)(_useState5,2),registerStep=_useState6[0],setRegisterStep=_useState6[1],_useState7=Object(react.useState)(!0),_useState8=Object(slicedToArray.a)(_useState7,2),nextDisabled=_useState8[0],setNextDisabled=_useState8[1],_useState9=Object(react.useState)([!1,!1,!1,!1,!1]),_useState10=Object(slicedToArray.a)(_useState9,2),passwordVerification=_useState10[0],setPasswordVerification=_useState10[1],_useReducer=Object(react.useReducer)((function(state,newState){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),newState)}),{email:{status:!1,msg:"",valid:!1,value:""},phoneNumber:{status:!1,msg:"",valid:!1,value:""},accountPassword:{status:!1,msg:"",valid:!1,value:""},username:{status:!1,msg:"",valid:!1,value:""},lastName:{status:!1,msg:"",valid:!1,value:""},firstName:{status:!1,msg:"",valid:!1,value:""},passwordConfirm:{status:!1,msg:"",valid:!1,value:""},regionCode:"000",termsAccepted:!1,emailVerified:"",phoneVerified:""}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],setState=_useReducer2[1],_useFocus=Object(componentUtils.a)(),_useFocus2=Object(slicedToArray.a)(_useFocus,2),inputSelect=_useFocus2[0],_useFocus3=(_useFocus2[1],Object(componentUtils.a)()),_useFocus4=Object(slicedToArray.a)(_useFocus3,2),inputUsername=_useFocus4[0],setInputUsernameFocus=_useFocus4[1],_useFocus5=Object(componentUtils.a)(),_useFocus6=Object(slicedToArray.a)(_useFocus5,2),inputEmail=_useFocus6[0],setInputEmailFocus=_useFocus6[1],_useFocus7=Object(componentUtils.a)(),_useFocus8=Object(slicedToArray.a)(_useFocus7,2),inputPhone=_useFocus8[0],setInputPhoneFocus=_useFocus8[1],_useFocus9=Object(componentUtils.a)(),_useFocus10=Object(slicedToArray.a)(_useFocus9,2),inputPassword=_useFocus10[0],setInputPasswordFocus=_useFocus10[1],_useFocus11=Object(componentUtils.a)(),_useFocus12=Object(slicedToArray.a)(_useFocus11,2),inputFirstname=_useFocus12[0],setInputFirstnameFocus=_useFocus12[1],_useFocus13=Object(componentUtils.a)(),_useFocus14=Object(slicedToArray.a)(_useFocus13,2),inputLastname=_useFocus14[0],setInputLastnameFocus=_useFocus14[1],_useState11=Object(react.useState)(!1),_useState12=Object(slicedToArray.a)(_useState11,2),addPopper=_useState12[0],setAddPopper=_useState12[1],checkPhoneAttr=function checkPhoneAttr(region,phone){if(appDebug)return Promise.resolve({});var phoneNumber=Object(utils.a)(region,phone);return Object(api.c)(API.a,"phone_number",phoneNumber,config.d.cognito.USER_POOL_ID)},phoneAlert=function phoneAlert(errorMsg,phoneState){phoneState||alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),setState({phoneNumber:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.phoneNumber),{},{status:!phoneState})})},checkPhone=function(){var _ref=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(region,phone){var check,errorMsg,checkResult,phoneState,_args=arguments;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(check=_args.length>2&&void 0!==_args[2]&&_args[2],console.log(phone,region),errorMsg=i18n.a.__("invalidPhoneNumber"),!Object(utils.h)(phone.toLowerCase())){_context.next=6;break}return phoneAlert(errorMsg,!1),_context.abrupt("return",!1);case 6:return checkResult=Object(utils.g)(region+phone),phoneState=Object.keys(checkResult).length>0,console.log("PHONE ",checkResult),phoneState&&check?(console.log("CHECKING PHONE NUMBER"),checkPhoneAttr(region,phone).then((function(res){void 0!==res.data&&res.data.checkCognitoAttribute?phoneAlert(errorMsg,!1):setState({phoneNumber:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.phoneNumber),{},{status:!1})})}))):phoneAlert(errorMsg,phoneState),_context.abrupt("return",!phoneState);case 11:case"end":return _context.stop()}}),_callee)})));return function checkPhone(_x,_x2){return _ref.apply(this,arguments)}}(),checkEmailAttr=function checkEmailAttr(email){return Object(api.c)(API.a,"email",email,config.d.cognito.USER_POOL_ID)},emailAlert=function emailAlert(errorMsg,emailState){emailState||alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),setState({email:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.email),{},{status:!emailState})})},checkEmail=function checkEmail(email){var check=arguments.length>1&&void 0!==arguments[1]&&arguments[1],emailState=Object(utils.k)(email);console.log("EMAIL ",emailState);var errorMsg=i18n.a.__("invalidEmail");return emailState&&check?(console.log("CHECKING EMAIL"),checkEmailAttr(email).then((function(res){console.log("EMAIL ATTR CHECK ",res),void 0!==res.data&&res.data.checkCognitoAttribute?emailAlert(errorMsg,!1):setState({email:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.email),{},{status:!1})})}))):emailAlert(errorMsg,emailState),check?emailState:!emailState},userNameAlert=function userNameAlert(userError,userMsg){userError&&!alerts.check().some((function(alert){return alert.message===userMsg}))&&alerts.error(userMsg,{}),setState({username:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.username),{},{status:userError})})},checkUsername=function checkUsername(username){var check=arguments.length>1&&void 0!==arguments[1]&&arguments[1],userState=Object(utils.l)(username,config.d.usernameLength),userError=""!==userState,userMsg="";return"LENGTH"===userState&&(userMsg=i18n.a.__("usernameError",{length:config.d.usernameLength})),"SPACES"===userState&&(userMsg=i18n.a.__("usernameError2")),console.log("USER ",username,userError),!userError&&check?(console.log("CHECKING USER"),Object(api.d)(API.a,username).then((function(res){void 0!==res.data&&res.data.checkUsername?userNameAlert(!0,i18n.a.__("usernameExists")):setState({username:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.username),{},{status:!1})})}))):userNameAlert(userError,userMsg),userError},isPasswordPossible=function isPasswordPossible(){var errorMsg=i18n.a.__("invalidEntry");if(0===state.firstName.value.length)console.log("check 1"),setState({firstName:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.firstName),{},{status:!0})}),setInputFirstnameFocus();else if(0===state.lastName.value.length)console.log("check 2"),setState({lastName:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.lastName),{},{status:!0})}),setInputLastnameFocus();else if(0===state.username.value.length)console.log("check 3"),setState({username:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.username),{},{status:!0})}),setInputUsernameFocus();else if(0===state.email.value.length)console.log("check 4"),setState({email:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.email),{},{status:!0})}),setInputEmailFocus();else if(state.username.status)console.log("check 5"),setInputUsernameFocus();else if(state.email.status)console.log("check 6"),setInputEmailFocus();else if(state.firstName.status)console.log("check 7"),setInputFirstnameFocus();else if(state.lastName.status)console.log("check 8"),setInputLastnameFocus();else{if(!state.phoneNumber.status)return console.log("ALL GOOD..."),!0;console.log("check 8"),setInputPhoneFocus()}return alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),!1},checkInputPassword=function checkInputPassword(password){var checkResult=Object(utils.b)(password,config.d.passwordLength,[state.firstName.value,state.lastName.value,state.username.value]);return console.log("PASS CHECK ",checkResult),setPasswordVerification(checkResult),checkResult},checkPasswordQuality=function checkPasswordQuality(verifications){return console.log("Checking password quality... ",passwordVerification,verifications),(verifications||passwordVerification).some((function(v,i){return console.log("STEP ",v,i),!1===v}))};Object(react.useEffect)((function(){function _onLoad(){return(_onLoad=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){var userCountry,cIndex;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,Object(api.e)(API.a);case 3:userCountry=_context2.sent,console.log("COUNTRY ",userCountry.data.getCountryCode),userCountry.data&&(cIndex=selectOptions.findIndex((function(c){return c.regionCode===userCountry.data.getCountryCode})),console.log("INDEX ",cIndex),cIndex>-1&&setState({regionCode:selectOptions[cIndex].key})),_context2.next=11;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(0),console.log("ERR ",_context2.t0);case 11:case"end":return _context2.stop()}}),_callee2,null,[[0,8]])})))).apply(this,arguments)}!function onLoad(){return _onLoad.apply(this,arguments)}()}),[]);var handleChange=function handleChange(event){if(console.log(event.target.id,document.activeElement.id),event.target)if(console.log("HANDLE CHANGE ",event.target.id,event.target.value,document.activeElement.id,document.activeElement.value),"phoneNumber"!==event.target.id||"accountPassword"!==document.activeElement.id&&"passwordConfirm"!==document.activeElement.id){var id=event.target.id,fld=Object.assign({},state[id]);fld.value=event.target.value,fld.valid=!1,["firstName","lastName"].indexOf(id)>-1&&(fld.status=0===event.target.value.length),console.log("CHANGE ID ",id,fld),setState(Object(defineProperty.a)({},id,fld))}else;},nextButtonClick=function nextButtonClick(e){var valuesChecked=!0,emailChecked=!1,phoneChecked=!1,usernameChecked=!1;if(isPasswordPossible())if(function checkConfirmPassword(password){var onBlur=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Confirm ",password,state);var confirmStatus=state.accountPassword.value===password;console.log(confirmStatus,state.accountPassword,password);var checkResult=!1,errorMsg=i18n.a.__("invalidPassword");return!confirmStatus&&password.length>=config.d.passwordLength||!confirmStatus&&!onBlur&&!nextDisabled?(setState({accountPassword:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.accountPassword),{},{status:!0}),passwordConfirm:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.passwordConfirm),{},{status:!0})}),setNextDisabled(!0),alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),checkResult=!0):confirmStatus&&(setState({accountPassword:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.accountPassword),{},{status:!1}),passwordConfirm:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.passwordConfirm),{},{status:!1})}),setNextDisabled(!1)),!confirmStatus&&onBlur&&setInputPasswordFocus(),checkResult}(state.passwordConfirm.value,!1))console.log("CONTROL 2"),valuesChecked=!1;else{console.log("PASSWORD CHECKS ");var passwordCheckResult=checkInputPassword(state.accountPassword.value,!1);if(checkPasswordQuality(passwordCheckResult)){valuesChecked=!1;var errorMsg=i18n.a.__("passwordQuality");alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{})}}else console.log("CONTROL 1"),valuesChecked=!1;valuesChecked&&(checkUsername(state.username.value,!1)?(console.log("CONTROL 3"),valuesChecked=!1):usernameChecked=!0,checkEmail(state.email.value,!1)?(console.log("CONTROL 4"),valuesChecked=!1):emailChecked=!0,checkPhone(state.regionCode,state.phoneNumber.value,!0)?phoneChecked=!0:(console.log("CONTROL 5"),valuesChecked=!1));var promises=[];return promises[0]=Promise.resolve(valuesChecked),usernameChecked?promises.push(Object(api.d)(API.a,state.username.value)):promises.push(Promise.resolve({})),emailChecked?promises.push(checkEmailAttr(state.email.value)):promises.push(Promise.resolve({})),phoneChecked?promises.push(checkPhoneAttr(state.regionCode,state.phoneNumber.value)):promises.push(Promise.resolve({})),promises},passwordCheck=function passwordCheck(password){var passwordCheckResult=checkInputPassword(password);if(checkPasswordQuality(passwordCheckResult)){var errorMsg=i18n.a.__("passwordQuality");return alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{}),!1}return!0},accountContext={nextStepAction:function nextStepAction(step){if(console.log("ACTION STEP ",step),4===step){console.log("CURRENT USER ",currentUser);var _currentUser=Object.assign({},state);_currentUser.phoneVerified=currentUser.phone_number,_currentUser.emailVerified=currentUser.email,_currentUser.termsAccepted=!0,_currentUser.uuid=currentUser.username,_currentUser.client=currentUser.client,props.finalStep(_currentUser)}else 2===step?(setState({termsAccepted:!0}),setRegisterStep(step)):3===step?(setState({emailVerified:currentUser.email}),setRegisterStep(step)):0===step&&(alerts.info(i18n.a.__("acceptTerms"),{}),setRegisterStep(step))},currentUser:currentUser,state:state};return Object(jsx_runtime.jsxs)(contextLib.a.Provider,{value:accountContext,children:[3===registerStep&&Object(jsx_runtime.jsx)(esm.Box,{mt:80,children:Object(jsx_runtime.jsx)(PhoneVerification.default,{invalidLink:config.d.invalidVerificationLink})}),2===registerStep&&Object(jsx_runtime.jsx)(esm.Box,{mt:80,children:Object(jsx_runtime.jsx)(EmailVerification.default,{invalidLink:config.d.invalidVerificationLink})}),1===registerStep&&Object(jsx_runtime.jsx)(TermsOfUse.default,{}),0===registerStep&&Object(jsx_runtime.jsxs)(ProgressContainer.a,{title:i18n.a.__("createAccountTitle"),progress:33,children:[Object(jsx_runtime.jsxs)(esm.Box,{mt:40,display:"inline-flex",children:[Object(jsx_runtime.jsx)(esm.Flex,{width:"168px",children:Object(jsx_runtime.jsx)(esm.Input,{autoFocus:!0,placeholder:i18n.a.__("firstNamePlaceholder"),id:"firstName",name:"firstName",onChange:handleChange,ref:inputFirstname,error:state.firstName.status,defaultValue:state.firstName.value})}),Object(jsx_runtime.jsx)(esm.Flex,{ml:25,width:"168px",children:Object(jsx_runtime.jsx)(esm.Input,{placeholder:i18n.a.__("lastNamePlaceholder"),id:"lastName",name:"lastName",onChange:handleChange,ref:inputLastname,error:state.lastName.status,defaultValue:state.lastName.value})})]}),Object(jsx_runtime.jsx)(esm.Box,{mt:28,children:Object(jsx_runtime.jsxs)(esm.IconField,{children:[Object(jsx_runtime.jsx)(esm.IconField.LeftIcon,{iconify:bx_user_default.a,color:"componentPrimary",size:"17"}),Object(jsx_runtime.jsx)(esm.IconField.InputField,{placeholder:i18n.a.__("usernamePlaceholder"),id:"username",name:"username",onChange:handleChange,onBlur:function onBlur(e){return checkUsername(e.target.value)},error:state.username.status,ref:inputUsername,defaultValue:state.username.value,onKeyDown:function onKeyDown(e){"Enter"===e.key&&checkUsername(e.target.value,!0)}})]})}),Object(jsx_runtime.jsx)(esm.Box,{mt:28,children:Object(jsx_runtime.jsxs)(esm.IconField,{children:[Object(jsx_runtime.jsx)(esm.IconField.LeftIcon,{iconify:bx_envelope_default.a,color:"componentPrimary",size:"17"}),Object(jsx_runtime.jsx)(esm.IconField.InputField,{placeholder:i18n.a.__("emailPlaceholder"),id:"email",name:"email",onChange:handleChange,promptMsg:state.email.valid?i18n.a.__("emailPrompt"):"",error:state.email.status,ref:inputEmail,onBlur:function onBlur(e){return checkEmail(e.target.value)},defaultValue:state.email.value,onKeyDown:function onKeyDown(e){"Enter"===e.key&&checkEmail(e.target.value,!0)}})]})}),Object(jsx_runtime.jsx)(esm.Box,{mt:28,children:Object(jsx_runtime.jsxs)(components_PhoneNumberField,{children:[Object(jsx_runtime.jsx)(components_PhoneNumberField.RegionField,{defaultValue:state.regionCode,options:selectOptions,searchLength:2,showList:!1,ref:inputSelect,onChange:function onChange(e,code){console.log("REGION SELECT ",e,code),handleChange({target:{id:"regionCode",value:code}})}},state.regionCode),Object(jsx_runtime.jsx)(components_PhoneNumberField.InputField,{placeholder:i18n.a.__("phoneNumberPlaceholder"),id:"phoneNumber",name:"phoneNumber",onChange:handleChange,promptMsg:state.phoneNumber.valid?i18n.a.__("phonePrompt"):"",error:state.phoneNumber.status,ref:inputPhone,defaultValue:state.phoneNumber.value,onBlur:function onBlur(e){("phoneNumber"!==e.target.id||"accountPassword"!==document.activeElement.id&&"passwordConfirm"!==document.activeElement.id)&&checkPhone(state.regionCode,e.target.value)},onKeyDown:function onKeyDown(e){"Enter"===e.key&&checkPhone(state.regionCode,e.target.value,!0)}})]})}),Object(jsx_runtime.jsx)(esm.Box,{mt:28,children:Object(jsx_runtime.jsx)(PasswordField.a,{placeholder:i18n.a.__("passwordPlaceholder"),onFocus:function onFocus(e){isPasswordPossible()?state.accountPassword.valid&&0!==state.accountPassword.value.length||(console.log("OPEN POPUP "),setAddPopper(!0)):(e.preventDefault(),e.stopPropagation())},addPopper:addPopper,verifications:passwordVerification,id:"accountPassword",name:"accountPassword",onChange:function onChange(e){handleChange(e),checkInputPassword(e.target.value),state.phoneNumber.value!==document.getElementById("phoneNumber").value&&(document.getElementById("phoneNumber").value=state.phoneNumber.value)},ref:inputPassword,defaultValue:state.accountPassword.value,error:state.accountPassword.status,onBlur:function onBlur(e){e.target.value.length>0?passwordCheck(e.target.value)?setAddPopper(!1):(console.log("PREVENT BLUR:...."),setInputPasswordFocus(),e.preventDefault()):setAddPopper(!1)},onKeyDown:function onKeyDown(e){if("Enter"===e.key){console.log("CHECKING PASSWORD ",e.target.value);var checkStatus=passwordCheck(e.target.value);console.log("CHECK STATUS ",checkStatus),checkStatus&&setAddPopper(!1)}},autoComplete:"new-password"})}),Object(jsx_runtime.jsx)(esm.Box,{mt:28,children:Object(jsx_runtime.jsx)(PasswordField.a,{placeholder:i18n.a.__("confirmPlaceholder"),onFocus:function onFocus(e){0===state.accountPassword.value.length&&(setInputPasswordFocus(),e.preventDefault(),e.stopPropagation())},id:"passwordConfirm",name:"passwordConfirm",defaultValue:state.passwordConfirm.value,onChange:function onChange(e){handleChange(e)},error:state.accountPassword.status||state.passwordConfirm.status,onKeyDown:function onKeyDown(e){if("Enter"===e.key){var cPassword=e.target.value,confirmStatus=state.accountPassword.value===cPassword;if(!confirmStatus&&cPassword.length>=config.d.passwordLength||!confirmStatus&&!nextDisabled){var errorMsg=i18n.a.__("invalidPassword");setNextDisabled(!0),alerts.check().some((function(alert){return alert.message===errorMsg}))||alerts.error(errorMsg,{})}else setNextDisabled(!1)}},autoComplete:"new-password"})}),Object(jsx_runtime.jsxs)(esm.Box,{mt:66,textAlign:"center",children:[Object(jsx_runtime.jsx)(esm.Button,{disabled:nextDisabled,onClick:function onClick(e){Promise.all(nextButtonClick()).then((function(res){console.log("PROMISE ",res);var checkResult=!0;if(void 0!==res[1].data&&res[1].data.checkUsername?(userNameAlert(!0,i18n.a.__("usernameExists")),checkResult=!1):setState({username:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.username),{},{status:!1})}),void 0!==res[2].data&&res[2].data.checkCognitoAttribute?(emailAlert(i18n.a.__("invalidEmail"),!1),checkResult=!1):setState({email:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.email),{},{status:!1})}),void 0!==res[3].data&&res[3].data.checkCognitoAttribute?(phoneAlert(i18n.a.__("invalidPhoneNumber"),!1),checkResult=!1):setState({phoneNumber:Object(objectSpread2.a)(Object(objectSpread2.a)({},state.phoneNumber),{},{status:!1})}),checkResult&&!res[0]&&(checkResult=!1),checkResult){console.log("NEXT....",currentUser);var phoneNumber=Object(utils.a)(state.regionCode,state.phoneNumber.value),_currentUser=Object.assign({},currentUser);_currentUser.given_name=state.firstName.value;var emailVerified=""!==state.emailVerified,phoneVerified=""!==state.phoneVerified;_currentUser.email!==state.email.value&&(_currentUser.email=state.email.value,emailVerified=!1),_currentUser.phone_number!==phoneNumber&&(_currentUser.phone_number=phoneNumber,phoneVerified=!1),console.log("NEXT CURRENT USER ",_currentUser),setCurrentUser(_currentUser),state.termsAccepted?(state.emailVerified===_currentUser.email&&emailVerified||setRegisterStep(2),state.phoneVerified===_currentUser.phone_number&&phoneVerified||setRegisterStep(3),""!==state.emailVerified&&""!==state.phoneVerified&&setRegisterStep(4)):setRegisterStep(1)}}))},children:i18n.a.__("nextButton")}),Object(jsx_runtime.jsx)(esm.Box,{mt:10,children:Object(jsx_runtime.jsx)(esm.Box,{display:"inline-flex",children:Object(jsx_runtime.jsxs)(esm.Flex,{alignItems:"center",children:[Object(jsx_runtime.jsx)(esm.Text,{textStyle:"caption2",mr:5,children:i18n.a.__("existingAccount")}),Object(jsx_runtime.jsx)(esm.Button,{variation:"link",fontSize:"10px",lineHeight:"normal",onClick:function loginLink(e){history.replace("/login"),e.preventDefault()},children:i18n.a.__("loginLink")})]})})})]})]})]})};CreateAccount_CreateAccount.__docgenInfo={description:"",methods:[],displayName:"CreateAccount",props:{finalStep:{type:{name:"func"},required:!0,description:""}}};__webpack_exports__.default=CreateAccount_CreateAccount;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/CreateAccount.js"]={name:"CreateAccount",docgenInfo:CreateAccount_CreateAccount.__docgenInfo,path:"src/pages/CreateAccount.js"})}}]);
//# sourceMappingURL=0.1aa1e529c98150fe2085.bundle.js.map